
<div class="titlepage">
<h1> Finger Pieces : A miscellanea of diagrams </h1>
<p class="authors">
<span class="author">Stephen Gaito</span>
</p>
</div>
<div class="abstract"> In this finger piece, we explore the creation of various types of diagrams, from Petri Nets to the Categorical. </div>

<h2 id="fp-diag-basics" class="tex-section"><span data-tag="">1</span> The basics of MetaFun</h2>

<p>
The diSimplex/LPiL projects make use of the ConTeXt diagramming package MetaFun which is in turn based upon MetaPost. We do this by typesetting the diagram using ConTeXt and then embedding the resulting diagram in the main document as either a single page pdf graphic <em>or</em> as an Encapsulated PostScript (eps) file<a class="footnote" href="#diagrams-a0000000029">
  <sup class="footnotemark">1</sup>
</a>. 
</p>
<p>
To keep things simple, each figure is created in its own file. Among other reasons, this lets your writing tool typeset and display the results without having to typeset the rest of your larger document. By default the file name must <em>end</em> with <code class="verbatim">_mp.tex</code>, and then be included using 
</p>
<div class="centered"> <code class="verbatim">\includeLpilDiagram{firstFigure_mp}</code> </div>
<p>
 where <code class="verbatim">firstFigure_mp.tex</code> is the name of the ConTeXt/MetaFun file which contains the associated diagram. 
</p>
<p>
For example: 
</p>
<p>
\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PY{c}{\PYZpc{} !TEX root    = firstFigure\PYZus{}mp.tex}
\PY{c}{\PYZpc{} !TEX program = metafun}
\PY{k}{\PYZbs{}startMPpage}
\PY{g}{fill}\PY{+w}{ }\PY{g}{fullcircle}\PY{+w}{ }\PY{g}{xyscaled}\PY{+w}{ }\PY{g}{(8cm,1cm)}\PY{+w}{ }\PY{g}{withcolor}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{darkred}\PY{l+s}{\PYZdq{}}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{textext(\PYZdq{}\PYZbs{}bf}\PY{+w}{ }\PY{g}{This}\PY{+w}{ }\PY{g}{is}\PY{+w}{ }\PY{g}{text}\PY{+w}{ }\PY{g}{A\PYZdq{})}\PY{+w}{ }\PY{g}{withcolor}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{white}\PY{l+s}{\PYZdq{}}\PY{+w}{ }\PY{g}{;}
\PY{k}{\PYZbs{}stopMPpage}
\end{Verbatim}
 
</p>
<p>
<img src="diagrams/images/img-0001.svg" alt="\includegraphics{build/latex/basics/firstFigure_mp.svg}" style="width: ; height: " />
 
</p>

<h2 id="commDiag-basics" class="tex-section"><span data-tag="">2</span> Using the commDiag module</h2>

<p>
The ConTeXt commDiag module is a collection of MetaPost/MetaFun macros defined ontop of MetaPost, MetaFun, and Nodes which can be used to draw fairly sophisticated Categorical Diagrams. 
</p>
<p>
In particular the commDiag module defines various arrows on both the head and the tail of a given arrow (MetaPost path). It also defines a number of different arrow bodies. 
</p>
<p>
For example: 
</p>
<p>
\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PY{c}{\PYZpc{} !TEX root    = arrowsAndLines\PYZus{}mp.tex}
\PY{c}{\PYZpc{} !TEX program = metafun}

\PY{k}{\PYZbs{}usemodule}\PY{n+na}{[commDiag]}

\PY{k}{\PYZbs{}startMPpage}

\PY{g}{setupCDgrid(9,}\PY{+w}{ }\PY{l+m}{1}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+m}{2}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{\PYZhy{}90}\PY{g}{)}

\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}a\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}b\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}c\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}d\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZlt{}\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}\PYZgt{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{[\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow.top(\PYZdq{}\PYZti{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}]}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZgt{}\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow.top(\PYZdq{}\PYZca{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}\PYZlt{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{]\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow.top(\PYZdq{}=\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}[}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{o\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}o}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{|\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}|}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZlt{}[\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}]\PYZgt{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZlt{}]\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}[\PYZgt{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{o[\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}]o}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZgt{}[\PYZhy{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}drawCDArrow.top(\PYZdq{}\PYZhy{}\PYZdq{},}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{g}{drawCDArrow(}\PY{+w}{   }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}]\PYZlt{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{arrows:}\PY{+w}{ }\PY{g}{first}\PY{+w}{ }\PY{g}{and}\PY{+w}{ }\PY{g}{second;}\PY{+w}{ }\PY{g}{(normal)}\PY{+w}{ }\PY{g}{and}\PY{+w}{ }\PY{g}{reversed;}\PY{+w}{ }\PY{g}{head}\PY{+w}{ }\PY{g}{and}\PY{+w}{ }\PY{g}{tail}
\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{dot:}\PY{+w}{ }\PY{g}{head}\PY{+w}{ }\PY{g}{and}\PY{+w}{ }\PY{g}{tail}
\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{bar:}\PY{+w}{ }\PY{g}{head}\PY{+w}{ }\PY{g}{and}\PY{+w}{ }\PY{g}{tail}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{bodies:}\PY{+w}{ }\PY{g}{(normal)}\PY{+w}{ }\PY{g}{sinuous,}\PY{+w}{ }\PY{g}{ziggy}\PY{+w}{ }\PY{g}{and}\PY{+w}{ }\PY{g}{doubled}

\PY{k}{\PYZbs{}stopMPpage}
\end{Verbatim}
 
</p>
<p>
<img src="diagrams/images/img-0002.svg" alt="\includegraphics{build/latex/basics/arrowsAndLines_mp.svg}" style="width: ; height: " />
   
</p>

<h2 id="fp-petri-net" class="tex-section"><span data-tag="">3</span> The basics of drawing Petri Nets</h2>

<p>
We will need to draw lots of Petri Nets at various levels of abstraction. 
</p>
<p>
Here is a first fairly complex example. It has been re-drawn from page 19 of Jensenâ€™s <em>Coloured Petri Nets: Basic Concepts, Analysis and Practical Use</em> (Volume 1). 
</p>
<p>
\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PY{c}{\PYZpc{} !TEX root    = colouredNet\PYZus{}mp.tex}
\PY{c}{\PYZpc{} !TEX program = metafun}

\PY{k}{\PYZbs{}usemodule}\PY{n+na}{[commDiag]}

\PY{k}{\PYZbs{}startMPpage}
\PY{g}{save}\PY{+w}{ }\PY{g}{p,}\PY{+w}{ }\PY{g}{r;}\PY{+w}{ }\PY{g}{path}\PY{+w}{ }\PY{g}{p[],}\PY{+w}{ }\PY{g}{r[];}

\PY{g}{setupCDgrid(12,}\PY{+w}{ }\PY{l+m}{1.5}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+m}{2.5}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{\PYZhy{}90}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{pnPlaceText(\PYZdq{}A\PYZdq{}))}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{pnTransitionText(\PYZdq{}T1\PYZdq{}));}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{pnPlaceText(\PYZdq{}B\PYZdq{}))}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{pnTransitionText(\PYZdq{}T2\PYZdq{}));}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{g}{pnPlaceText(\PYZdq{}C\PYZdq{}))}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{pnTransitionText(\PYZdq{}T3\PYZdq{}));}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{g}{pnPlaceText(\PYZdq{}D\PYZdq{}))}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{g}{pnTransitionText(\PYZdq{}T4\PYZdq{}));}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{7}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{  }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{g}{pnPlaceText(\PYZdq{}E\PYZdq{}))}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{pnTransitionText(\PYZdq{}T5\PYZdq{}));}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{9}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],10,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}(x,i)\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}

\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{pnPlaceText(\PYZdq{}Res\PYZdq{}));}
\PY{g}{nodesStackedLabel(\PYZdq{}V\PYZdq{})(.2mm,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6.5}\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdl{}1\PYZsq{}r+3\PYZsq{}s+2\PYZsq{}t\PYZdl{}}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}\PY{+w}{ }\PY{g}{shifted(}\PY{+w}{ }\PY{l+m}{\PYZhy{}1.5}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{);}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1)(20mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdl{}1\PYZsq{}r+1\PYZsq{}s\PYZdl{}}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{);}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1)(20mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{case \PYZdl{}x\PYZdl{} of}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdl{}p =\PYZgt{} 2\PYZsq{}s\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{| \PYZdl{}q =\PYZgt{} 1\PYZsq{}s\PYZdl{}}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{);}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{5.5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1)(20mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{if \PYZdl{}x=p\PYZdl{} then \PYZdl{}1\PYZsq{}t\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{else empty}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{5.4}\PY{g}{)}\PY{+w}{ }\PY{g}{shifted}\PY{+w}{ }\PY{g}{(.25cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{);}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(p[2],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{6.5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1)(20mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{if \PYZdl{}x=q\PYZdl{} then \PYZdl{}1\PYZsq{}t\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{else empty}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{6.6}\PY{g}{)}\PY{+w}{ }\PY{g}{shifted(}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{);}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.bot(0,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{8}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeTiny\PYZob{}t\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{11}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1)(20mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{case \PYZdl{}x\PYZdl{} of}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdl{}p =\PYZgt{} 2\PYZsq{}s+2\PYZsq{}t\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{| \PYZdl{}q =\PYZgt{} 2\PYZsq{}s+1\PYZsq{}t\PYZdl{}}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{)}\PY{+w}{ }\PY{g}{shifted(}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{);}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(}
\PY{+w}{      }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{11}\PY{g}{,}\PY{+w}{ }\PY{g}{p[4],}\PY{+w}{ }\PY{l+m}{11}\PY{g}{,}\PY{+w}{ }\PY{g}{p[4],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}
\PY{+w}{    }\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1,2,3)(5mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{if \PYZdl{}x=p\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{then \PYZdl{}1\PYZsq{}(p,i+1)\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{else empty}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{3.25}\PY{g}{);}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{pnCutNodeEnds(p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{)(}
\PY{+w}{  }\PY{g}{pnRoundCornersAt(}
\PY{+w}{    }\PY{g}{nodesAssembleLinearPath(}
\PY{+w}{      }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{10}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{11}\PY{g}{,}\PY{+w}{ }\PY{g}{p[4],}\PY{+w}{ }\PY{l+m}{11}\PY{g}{,}\PY{+w}{ }\PY{g}{p[4],}\PY{+w}{ }\PY{l+m}{0.25}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{0.25}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{1}
\PY{+w}{    }\PY{g}{)}
\PY{+w}{  }\PY{g}{)(1,2,3,4)(5mm)}
\PY{g}{);}
\PY{g}{nodesStackedLabel(}
\PY{+w}{  }\PY{l+s}{\PYZdq{}}\PY{l+s}{if \PYZdl{}x=q\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{then \PYZdl{}1\PYZsq{}(q,i+1)\PYZdl{}}\PY{l+s}{\PYZdq{}}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{else empty}\PY{l+s}{\PYZdq{}}
\PY{g}{)(.2mm,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{0.5}\PY{g}{)}\PY{+w}{ }\PY{g}{;}


\PY{k}{\PYZbs{}stopMPpage}
\end{Verbatim}
 
</p>
<p>
<img src="diagrams/images/img-0003.svg" alt="\includegraphics{build/latex/petriNets/colouredNet_mp.svg}" style="width: ; height: " />
  
</p>

<h2 id="fp-diag-cat" class="tex-section"><span data-tag="">4</span> The basics of drawing Categorical diagrams</h2>

<p>
We will need to draw lots of Categorical diagrams. 
</p>
<p>
Here is a first simple square (using MetaFun/Nodes). 
</p>
<p>
\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PY{c}{\PYZpc{} !TEX root    = simpleSquare\PYZus{}mp.tex}
\PY{c}{\PYZpc{} !TEX program = metafun}
\PY{k}{\PYZbs{}defineframed}
  [nodeSmall]
  [node]
  [foregroundstyle=small]
\PY{k}{\PYZbs{}startMPpage}
\PY{g}{clearnodepath}\PY{+w}{ }\PY{g}{;}
\PY{g}{path}\PY{+w}{ }\PY{g}{p}\PY{+w}{ }\PY{g}{;}\PY{+w}{ }\PY{g}{p}\PY{+w}{ }\PY{g}{=}\PY{+w}{ }\PY{g}{fullsquare}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{3}\PY{g}{cm}\PY{+w}{ }\PY{g}{;}
\PY{g}{nodepath}\PY{+w}{ }\PY{g}{=}\PY{+w}{ }\PY{g}{p}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(0,\PYZdq{}\PYZbs{}node\PYZob{}\PYZdl{}G(X)\PYZdl{}\PYZcb{}\PYZdq{})}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(1,\PYZdq{}\PYZbs{}node\PYZob{}\PYZdl{}G(Y)\PYZdl{}\PYZcb{}\PYZdq{})}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(2,\PYZdq{}\PYZbs{}node\PYZob{}\PYZdl{}F(Y)\PYZdl{}\PYZcb{}\PYZdq{})}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(3,\PYZdq{}\PYZbs{}node\PYZob{}\PYZdl{}F(X)\PYZdl{}\PYZcb{}\PYZdq{})}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromto.bot(0,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}G(f)\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromto.top(0,}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}F(f)\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromto.rt}\PY{+w}{ }\PY{g}{(0,}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}\PYZbs{}eta\PYZus{}Y\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromto.lft(0,}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}\PYZbs{}eta\PYZus{}X\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{k}{\PYZbs{}stopMPpage}
\end{Verbatim}
 
</p>
<p>
<img src="diagrams/images/img-0004.svg" alt="\includegraphics{build/latex/categorical/simpleSquare_mp.svg}" style="width: ; height: " />
 
</p>
<p>
Here is a much more advanced example using the commDiag module. 
</p>
<p>
\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PY{c}{\PYZpc{} !TEX root    = kerCoKerDiagram\PYZus{}mp.tex}
\PY{c}{\PYZpc{} !TEX program = metafun}

\PY{k}{\PYZbs{}usemodule}\PY{n+na}{[commDiag]}

\PY{k}{\PYZbs{}startMPpage}
\PY{g}{\PYZpc{}showtoken}\PY{+w}{ }\PY{g}{upto}\PY{+w}{ }\PY{g}{;}
\PY{g}{\PYZpc{}showtoken}\PY{+w}{ }\PY{g}{setupCDgrid}\PY{+w}{ }\PY{g}{;}

\PY{g}{setupCDgrid(6,}\PY{+w}{ }\PY{l+m}{2}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+m}{2}\PY{g}{cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{)}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{place}\PY{+w}{ }\PY{g}{the}\PY{+w}{ }\PY{g}{CD}\PY{+w}{ }\PY{g}{nodes}\PY{+w}{ }

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{top}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}0\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Ker \PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Ker \PYZdl{}a\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Ker \PYZdl{}b\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[3],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Ker \PYZdl{}c\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{top}\PY{+w}{ }\PY{g}{middle}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}A\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}B\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}C\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}0\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{bottom}\PY{+w}{ }\PY{g}{middle}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}0\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}A\PYZsq{}\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}B\PYZsq{}\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}C\PYZsq{}\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{bottom}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Coker \PYZdl{}a\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Coker \PYZdl{}b\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Coker \PYZdl{}c\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}Coker \PYZdl{}g\PYZsq{}\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}
\PY{n+nb}{draw}\PY{+w}{ }\PY{g}{node(p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}node\PYZob{}\PYZdl{}0\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{);}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{add}\PY{+w}{ }\PY{g}{the}\PY{+w}{ }\PY{g}{arrows}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{create}\PY{+w}{ }\PY{g}{(but}\PY{+w}{ }\PY{g}{don\PYZsq{}t}\PY{+w}{ }\PY{n+nb}{draw}\PY{g}{)}\PY{+w}{ }\PY{g}{the}\PY{+w}{ }\PY{g}{top}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{g}{bottom}\PY{+w}{ }\PY{g}{arrow...}

\PY{g}{save}\PY{+w}{ }\PY{g}{overArrow;}\PY{+w}{ }\PY{g}{path}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}
\PY{g}{overArrow}\PY{+w}{ }\PY{g}{:=}
\PY{+w}{  }\PY{g}{point}\PY{+w}{ }\PY{l+m}{4}\PY{+w}{ }\PY{g}{of}\PY{+w}{ }\PY{g}{p[3]}\PY{+w}{ }\PY{g}{shifted}\PY{+w}{ }\PY{g}{(0.75cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{)}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZhy{}}
\PY{+w}{  }\PY{g}{point}\PY{+w}{ }\PY{l+m}{4}\PY{+w}{ }\PY{g}{of}\PY{+w}{ }\PY{g}{p[3]}\PY{+w}{ }\PY{g}{shifted}\PY{+w}{ }\PY{g}{(1cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{)\PYZob{}dir}\PY{+w}{ }\PY{l+m}{0}\PY{g}{\PYZcb{}}\PY{+w}{ }\PY{l+m}{..}
\PY{+w}{  }\PY{g}{tension}\PY{+w}{ }\PY{l+m}{10}\PY{+w}{ }\PY{l+m}{..}
\PY{+w}{  }\PY{g}{\PYZob{}dir}\PY{+w}{ }\PY{l+m}{0}\PY{g}{\PYZcb{}point}\PY{+w}{ }\PY{l+m}{2}\PY{+w}{ }\PY{g}{of}\PY{+w}{ }\PY{g}{p[0]}\PY{+w}{ }\PY{g}{shifted}\PY{+w}{ }\PY{g}{(\PYZhy{}1cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{)}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZhy{}}
\PY{+w}{  }\PY{g}{point}\PY{+w}{ }\PY{l+m}{2}\PY{+w}{ }\PY{g}{of}\PY{+w}{ }\PY{g}{p[0]}\PY{+w}{ }\PY{g}{shifted}\PY{+w}{ }\PY{g}{(\PYZhy{}0.75cm,}\PY{+w}{ }\PY{l+m}{0}\PY{g}{);}


\PY{g}{drawoptions}\PY{+w}{ }\PY{g}{(}
\PY{+w}{  }\PY{g}{withpen}\PY{+w}{ }\PY{g}{pencircle}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{pt}
\PY{+w}{  }\PY{g}{withcolor}\PY{+w}{ }\PY{g}{red}
\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{+w}{  }
\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{top}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{0}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawoptions}\PY{+w}{ }\PY{g}{(}
\PY{+w}{  }\PY{g}{withpen}\PY{+w}{ }\PY{g}{pencircle}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{pt}
\PY{+w}{  }\PY{g}{withcolor}\PY{+w}{ }\PY{g}{black}
\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{t}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{g}{t\PYZhy{}m}\PY{+w}{ }\PY{g}{rows}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[3],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}\PY{+w}{ }\PY{g}{crossingunder}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawoptions}\PY{+w}{ }\PY{g}{(}
\PY{+w}{  }\PY{g}{withpen}\PY{+w}{ }\PY{g}{pencircle}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{pt}
\PY{+w}{  }\PY{g}{withcolor}\PY{+w}{ }\PY{g}{blue}
\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{top}\PY{+w}{ }\PY{g}{middle}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.top(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.ulft(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}g\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{crossingunder}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{t\PYZhy{}m}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{g}{b\PYZhy{}m}\PY{+w}{ }\PY{g}{rows}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}a\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.lrt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}b\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{crossingunder}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.rt(0,}\PY{+w}{ }\PY{g}{p[2],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}c\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{bottom}\PY{+w}{ }\PY{g}{middle}\PY{+w}{ }\PY{g}{row}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{1}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.lrt(0,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}f\PYZsq{}\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{crossingunder}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths.bot(0,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}nodeSmall\PYZob{}\PYZdl{}g\PYZsq{}\PYZdl{}\PYZcb{}}\PY{l+s}{\PYZdq{}}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawoptions}\PY{+w}{ }\PY{g}{(}
\PY{+w}{  }\PY{g}{withpen}\PY{+w}{ }\PY{g}{pencircle}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{pt}
\PY{+w}{  }\PY{g}{withcolor}\PY{+w}{ }\PY{g}{black}
\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{b\PYZhy{}m}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{g}{b}\PY{+w}{ }\PY{g}{rows}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{)}\PY{+w}{ }\PY{g}{crossingunder}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[1],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{bottom}\PY{+w}{ }\PY{g}{row}

\PY{g}{drawoptions}\PY{+w}{ }\PY{g}{(}
\PY{+w}{  }\PY{g}{withpen}\PY{+w}{ }\PY{g}{pencircle}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{pt}
\PY{+w}{  }\PY{g}{withcolor}\PY{+w}{ }\PY{g}{red}
\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{2}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{);}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{3}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{4}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{)}\PY{+w}{ }\PY{g}{;}
\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{fromtopaths(0,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{5}\PY{g}{,}\PY{+w}{ }\PY{g}{p[0],}\PY{+w}{ }\PY{l+m}{6}\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{g}{\PYZpc{}}\PY{+w}{ }\PY{g}{top}\PY{+w}{ }\PY{g}{\PYZhy{}\PYZgt{}}\PY{+w}{ }\PY{g}{bottom}\PY{+w}{ }\PY{g}{arrow...}

\PY{n+nb}{drawarrow}\PY{+w}{ }\PY{g}{overArrow}\PY{+w}{ }\PY{g}{;}
\PY{g}{label.ulft(\PYZdq{}\PYZbs{}nodeSmall\PYZob{}\PYZdl{}d\PYZdl{}\PYZcb{}\PYZdq{},}\PY{+w}{ }\PY{g}{point}\PY{+w}{ }\PY{l+m}{0.5}\PY{g}{*length(overArrow)}\PY{+w}{ }\PY{g}{of}\PY{+w}{ }\PY{g}{overArrow)}\PY{+w}{ }\PY{g}{;}

\PY{g}{drawoptions}\PY{+w}{ }\PY{g}{(}
\PY{+w}{  }\PY{g}{withpen}\PY{+w}{ }\PY{g}{pencircle}\PY{+w}{ }\PY{g}{scaled}\PY{+w}{ }\PY{l+m}{.5}\PY{g}{pt}
\PY{+w}{  }\PY{g}{withcolor}\PY{+w}{ }\PY{g}{black}
\PY{g}{)}\PY{+w}{ }\PY{g}{;}

\PY{k}{\PYZbs{}stopMPpage}
\end{Verbatim}
 
</p>
<div class="centered"> <img src="diagrams/images/img-0005.svg" alt="\includegraphics{build/latex/categorical/kerCoKerDiagram_mp.svg}" style="width: ; height: " />
 </div>

